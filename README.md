# SitePulse

**SitePulse** is a high-performance, full-stack SEO and Accessibility auditing tool designed for modern web development workflows. It integrates Google Lighthouse to provide comprehensive audits of static websites, featuring automatic URL discovery, real-time progress tracking, and detailed reporting.

## üöÄ Key Features

- **Dual-Device Auditing**: Automatically runs Lighthouse audits for both **Mobile** and **Desktop** form factors for every page.
- **granular Reporting**: Detailed breakdown of scores for **Performance**, **Accessibility**, **Best Practices**, and **SEO**.
- **Real-time Dashboard**: Watch your audit progress live with Server-Sent Events (SSE).
- **Smart Discovery**: Finds pages via:
  - **Sitemap Parsing**: Automatically reads `sitemap.xml` and `robots.txt`.
  - **Web Crawling**: Follows internal links to discover pages.
  - **Dist Scan**: (Unique feature) Scans a local build directory (e.g., `./dist` or `./out`) to guarantee 100% coverage of static assets, even those not linked.
- **Monorepo Architecture**: Built with `pnpm` workspaces for modular development.
- **CI/CD Ready**: Includes GitHub Actions for scheduled audits and automated deployments.

## üõ†Ô∏è Technology Stack

- **Frontend**: [Astro](https://astro.build) + [React](https://react.dev) + [Tailwind CSS](https://tailwindcss.com)
- **Backend**: [Fastify](https://fastify.dev) (Node.js)
- **Core Engine**: [Google Lighthouse](https://github.com/GoogleChrome/lighthouse) + [Puppeteer](https://pptr.dev)
- **Language**: TypeScript throughout

## üìÇ Project Structure

- **`apps/web`**: The frontend dashboard.
  - Displays audit progress, aggregate scores, and historical runs.
  - Built as a static site (SPA mode) for easy hosting on GitHub Pages.
- **`apps/api`**: The backend orchestrator.
  - Manages the job queue for audits.
  - Serves the JSON/HTML reports generated by Lighthouse.
- **`packages/runner`**: The core auditing logic.
  - Standalone package that can be run via CLI or imported by the API.
  - Handles the complexity of launching Chrome, running audits, and compiling results.
- **`packages/shared`**: Shared TypeScript definitions and utilities.

## üö¶ Getting Started

### Prerequisites

- Node.js 18+
- pnpm 8+

### Installation

```bash
# 1. Install dependencies
pnpm install

# 2. Build all packages (Required for first run)
pnpm build
```

### Development

Start the development environment (starts both API and Web UI):

```bash
pnpm dev
```

- **Frontend**: http://localhost:4321
- **Backend API**: http://localhost:3000

**Run individually:**

- Web only: `pnpm --filter @sitepulse/web dev`
- API only: `pnpm --filter @sitepulse/api dev`

## üìñ Usage

### Web Interface

1. Open http://localhost:4321.
2. Enter the **Base URL** of the website you want to audit (e.g., `https://example.com`).
3. (Optional) Configure advanced settings:
   - **Max Pages**: Limit the crawl depth.
   - **Concurrency**: Number of parallel tabs (default: 1).
4. Click **Start Audit**.
5. View the real-time progress bars and aggregate scores at the top.
6. Click "View Report" on any table row to see the full Lighthouse HTML report.

### CLI Commands

You can run the auditor headlessly without the UI:

```bash
# Run a standard audit
pnpm --filter @sitepulse/runner cli audit --baseUrl https://example.com

# Scan a local distribution folder (perfect for CI pipelines)
pnpm --filter @sitepulse/runner cli scan-dist --dist ./dist --baseUrl https://example.com
```

## ü§ñ CI/CD Integration

This project comes with pre-configured GitHub Actions in `.github/workflows`:
- `audit.yml`: Runs a scheduled weekly audit of your site.
- `deploy.yml`: Deploys the `apps/web` dashboard to GitHub Pages.

## License

MIT
